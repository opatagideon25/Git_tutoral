import random
import string

def generate_password():
    password_length = random.randint(8, 15)
    uppercase_count = 0
    lowercase_count = 0
    special_char_count = 0
    digit_count = 0
    password = []
    
    while len(password) < password_length:
        random_type = random.randint(1, 4)
        
        if random_type == 1 and uppercase_count < 2:
            char = random.choice(string.ascii_uppercase)
            uppercase_count += 1
            password.append(char)
        elif random_type == 2 and lowercase_count < 2:
            char = random.choice(string.ascii_lowercase)
            lowercase_count += 1
            password.append(char)
        elif random_type == 3 and special_char_count < 1:
            char = random.choice(string.punctuation)
            special_char_count += 1
            password.append(char)
        elif random_type == 4 and digit_count < 3:
            char = random.choice(string.digits)
            digit_count += 1
            password.append(char)
    
    # Fill the remaining password length with random characters
    while len(password) < password_length:
        char_type = random.randint(1, 3)
        
        if char_type == 1:
            char = random.choice(string.ascii_uppercase)
            password.append(char)
        elif char_type == 2:
            char = random.choice(string.ascii_lowercase)
            password.append(char)
        elif char_type == 3:
            char = random.choice(string.digits)
            password.append(char)
    
    random.shuffle(password)
    return ''.join(password)

# Generate and print a password
password = generate_password()
print(password)
